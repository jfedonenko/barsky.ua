
  $(document).ready(function(){

    $('.one-slider').slick({
      dots: true,
      arrows: false,
      autoplay: true,
      autoplaySpeed: 3000,
      infinite: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      adaptiveHeight: true
        });
     
$('.unit-slider').slick({
  dots: true,
  infinite: false,
  arrows: false,
  speed: 300,
  autoplay: true,
  autoplaySpeed: 2000,
  slidesToShow: 4,
  slidesToScroll: 1,
  responsive: [
    {
      breakpoint: 1200,
      settings: {
        slidesToShow: 3,
        slidesToScroll: 1,
        infinite: true,
        dots: true
      }
    },
    {
      breakpoint: 992,
      settings: {
        rows:2,
        slidesToShow: 3,
        slidesToScroll: 1,
        infinite: true,
        dots: true
      }
    },
    {
      breakpoint: 768,
      settings: {
        rows:2,
        slidesToShow: 2,
        slidesToScroll: 1,
        infinite: true,
        dots: true,
      }
    }
  
  ]
});
 $('.product-row').slick({
  dots: true,
  arrows: false,
  infinite: false,
  speed: 300,
  autoplay: true,
      autoplaySpeed: 2000,
  slidesToShow: 4,
  slidesToScroll: 1,
     responsive: [
        {
          breakpoint: 998,
          settings: {
        
          slidesToShow: 3,
          slidesToScroll: 2
                
          }
        }, 
        {
          breakpoint: 780,
          settings: {
          slidesToShow: 2.5,
          slidesToScroll: 1
                
          }
        }, 
        {
          breakpoint: 610,
          settings: {
          slidesToShow: 1.5,
          slidesToScroll: 1
                
          }
        }
      ]
    });

    // Карточка товара
    // $('.card-type').slick({
    //   dots: true,
    //   arrows: false,
    //   autoplay: true,
    //   autoplaySpeed: 3000,
    //   infinite: true,
    //   slidesToShow: 1,
    //   slidesToScroll: 1,
    //   adaptiveHeight: true
    //     });
     

        $('.carousel').slick({
          dots: true,
      arrows: false,
          autoplay: true,
      autoplaySpeed: 3000,
      infinite: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      adaptiveHeight: true
        });
        
        $('.carousel-iframe').magnificPopup({
          type: 'iframe'
        });
        
        $('.carousel').magnificPopup({
          delegate: '.carousel-link',
          gallery:{enabled:true},
          type: 'image',
          callbacks: {
            elementParse: function(item) {
              if (item.el[0].classList.contains('video-link')) {
                item.type = 'iframe';
              } else {
                item.type = 'image';
              }
            }
          }
        });

//  $('.single-for').slick({
//   slidesToShow: 1,
//   slidesToScroll: 1,
//   arrows: false,
//   fade: true,
//   dots: true,
//   asNavFor: '.single-nav'
// });
// $('.single-nav').slick({
//   slidesToShow: 5,
//   slidesToScroll: 1,
//   asNavFor: '.single-for',
//   arrows: false,
//   variableWidth: true,
//    focusOnSelect: true,
//    responsive: [
//     {
//            breakpoint: 610,
//       settings: {
//       slidesToShow: 4,
//       slidesToScroll: 1
            
//       }
//     }
//   ]
// });
	

   $('.popup-youtube, .popup-vimeo, .popup-gmaps').magnificPopup({
		disableOn: 700,
		type: 'iframe',
		mainClass: 'mfp-fade',
		removalDelay: 160,
		preloader: false,

		fixedContentPos: false
	});
  $('.popup-gallery').magnificPopup({
		delegate: 'a',
		type: 'image',
		tLoading: 'Loading image #%curr%...',
		mainClass: 'mfp-img-mobile',
		gallery: {
			enabled: true,
			navigateByImgClick: true,
			preload: [0,1] // Will preload 0 - before current, and 1 after the current image
		},
		image: {
			tError: '<a href="%url%">The image #%curr%</a> could not be loaded.',
			titleSrc: function(item) {
				return item.el.attr('title');
			}
		}
	});
  });

  /*
   searchwidget
*/

  $(".search-btn").click(function(){
    $(".input").toggleClass("active").focus;
    $(this).toggleClass("animate");
    $(".input").val("");
  });





$('body').on('click',  '.icon-js, .btn-more, .bi-star-fill, .style-scope',function(e){
  e.preventDefault();
  $(this).toggleClass('_active')
 })


 /*
 widget widget_price
*/

 $(function() {
  $("#slider-range").slider({
    range: true,
    min: 160,
    max: 27500,
    values: [160 , 18200],
    slide: function(event, ui) {
      // $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
      
      $("#amountMin").val( ui.values[0] + "  ₴" );
      $("#amountMax").val(ui.values[1] + "  ₴" );
    }
  });
  $("#amountMin").val($("#slider-range").slider("values", 0) + "  ₴");
  $("#amountMax").val($("#slider-range").slider("values", 1) + "  ₴ ");
});


/*
 header burger
*/
$(document).ready(function() {
	$('.header__burger').click(function(event) {
		$('.header__burger,.header__menu,.mobile-bg').toggleClass('active');
		$('body').toggleClass('lock');
	});
});



/*
  product List and Grid View
*/

function showList(e) {
  var $gridCont = $('.grid-container');
  e.preventDefault();
  $gridCont.hasClass('list-view') ? $gridCont.removeClass('list-view') : $gridCont.addClass('list-view');
}
function gridList(e) {
  var $gridCont = $('.grid-container')
  e.preventDefault();
  $gridCont.removeClass('list-view');
}

$(document).on('click', '.btn-grid', gridList);
$(document).on('click', '.btn-list', showList);

/*
 Start aside filter
*/ 
$('.btn-filter').on('click',function(){
  $('.shop-sidebar').toggle('');
 

});
$('.close-sidebar').on('click',function(){
$('.shop-sidebar').hide('');

});

$('.btn-compare').on('click',function(){
  $('.compare__category').toggle('');

});
$('.close-sidebar').on('click',function(){
$('.compare__category').hide('');

});


$(document).ready(function(){

  // PROFILE
  $('.personal-data__edit-button').on('click', function(){
    var input = $(this).parent().find('.input-group__input');

    $(this).parent().toggleClass('readonly').find('.input-group__input');
    $(this).parent().find('.input-group__input').first().focus();

    $(this).toggleClass('personal-data__save-button');

    if( input.prop("readonly") == true ){
      input.prop('readonly', false);
    }else{
      input.prop('readonly', true);
    }
    
  });

  $('.expand-history').on('click', function(){
    $('.accordion').toggle(300);
    $(this).toggleClass('active');
  });

  // Accordion    
  $(".accordion .accordion__text").hide().prev().click(function() {
    $(this).parents(".accordion").find(".accordion__text").not(this).slideUp().prev().parent().removeClass("active");
    $(this).next().not(":visible").slideDown().prev().parent().addClass("active");
  });
  $(".accordion__text").first().slideDown();


  $('.blog-modal-search__input').on('input change keyup', function(){
    var input = $(this).val();

    if( input.length != 0 ){
      $(this).parent().addClass('active');

      $('.blog-modal-search__clear-input').on('click', function(){
        $('.blog-modal-search__input').val("");
        $(this).parent().removeClass('active');
      });
    } else if(input.length == 0){
      $(this).parent().removeClass('active');
    }
  });

  $('.blog-modal-search-close').on('click', function(){
    $('.blog-modal-search').removeClass('active');
  });

  $('.hashtag').on('click', function () {
    $('.blog-modal-search').addClass('active');
  
  });



  var num;

  $('.button-count:first-child').click(function(){
    num = parseInt($(this).parent().find('.number-product').val());
    if (num > 1) {
      $(this).parent().find('.number-product').val(num - 1);
    }
    if (num == 2) {
      $('.button-count:first-child').prop('disabled', true);
    }
  });

  $('.button-count:last-child').click(function(){
    num = parseInt($(this).parent().find('.number-product').val());
      $(this).parent().find('.number-product').val(num + 1);
    if (num > 0) {
      $('.button-count:first-child').prop('disabled', false);
    }
  });


  $('.favorite-icons, .compare-icons, .gift-icons').on('click', function () {
    $(this).toggleClass('active');
  });


  $('.accessories__actions').on('click', function () {
    $(this).toggleClass('active');
  });

  $('.accessories__head').on('click', function () {
    $(this).parent().find('.accessories__body').toggle(300);
    $(this).find('.accessories__expand').toggleClass('active');
  });

  $('#shippingType .custom-control-input').on('click', function () {
      var postOfficeRadio = $("#novayaPoshtaPostOffice");

      if( $(this).is("#novayaPoshtaPostOffice") ){
        postOfficeRadio.is(":checked") ? $('.post-office').show() : $('post-office').hide();
      } else {
        $('.post-office').hide()
      }
  });

  $('.checkout-button').on('click', function(){

    window.location.hash = '';


    var name = $('#name').val().trim();
    var email = $('#email').val().trim();
    var tel = $('#tel').val().trim();
    var region = $('#region').val().trim();
    var city = $('#city').val().trim();


    if(name.length == 0){
      $("#name").parent().addClass('error');
      location.hash = '#' + "checkout";
    }
    else if (email.length == 0){
      $("#email").parent().addClass('error');
      location.hash = '#' + "checkout";
    }
    else if (tel.length == 0){
      $("#tel").parent().addClass('error');
      location.hash = '#' + "checkout";
    }
    else if (region.length == 0){
      $("#region").parent().addClass('error');
      location.hash = '#' + "name";
    }
    else if (city.length == 0){
      $("#city").parent().addClass('error');
      location.hash = '#' + "email";
    }
    else{
      window.location.hash = '';
      $('.input-group').removeClass('error');
      $('#checkout').submit();
    }

  });

  
});

//  отключения отправки форм при наличии недопустимых полей
(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Получите все формы, к которым мы хотим применить пользовательские стили проверки Bootstrap
    var forms = document.getElementsByClassName('needs-validation');
    // Зацикливайтесь на них и предотвращайте подчинение
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();


$(function(){
    $("#phone").mask("+38 (999) 999-99-99");
    $(window).on('load', function() {
      $('.mycustom-scroll').mCustomScrollbar({
        axis: 'y',              // вертикальный скролл 
        theme: 'rounded-dark',  // тема 
        scrollInertia: '330',   // продолжительность прокрутки, значение в миллисекундах 
        setHeight: '100%',      // высота блока (переписывает CSS) 
        mouseWheel: {
            deltaFactor: 300    // кол-во пикселей на одну прокрутку колёсика мыши
      }
    });
  });

});


(function($){
  $(window).on("load",function(){
      $(".mycustom-scroll").mCustomScrollbar({
        axis: 'x', 
                     
    theme: 'dark-3',  // тема 
    scrollInertia: '330',   // продолжительность прокрутки, значение в миллисекундах 
    // setHeight: '100%',      // высота блока (переписывает CSS) 
    mouseWheel: {
        deltaFactor: 300    // кол-во пикселей на одну прокрутку колёсика мыши 
    }
      });
  });
})(jQuery);



$('body')
    .one('focus.textarea', '#myTextarea', function(e) {
        baseH = this.scrollHeight;
    })
    .on('input.textarea', '#myTextarea', function(e) {
        if(baseH < this.scrollHeight) {
            $(this).height(0).height(this.scrollHeight);
        }
        else {
            $(this).height(0).height(baseH);
        }
    });

    $(document).ready(function() {
      $('.collapse.in').prev('.panel-heading').addClass('active');
      $('#accordion, #bs-collapse')
        .on('show.bs.collapse', function(a) {
          $(a.target).prev('.panel-heading').addClass('active');
        })
        .on('hide.bs.collapse', function(a) {
          $(a.target).prev('.panel-heading').removeClass('active');
        });
    });


    document.addEventListener("DOMContentLoaded", () => {

      // ======== Slider with one handle
      
      const priceSlider = document.getElementById('r-slider');
  
      noUiSlider.create(priceSlider, {
          start: [10, 30000],
          tooltips: true,
          connect: true,
          padding: 6,
          range: {
              'min': 0,
              'max': 200
          },
          
      });
  
      priceSlider.noUiSlider.on('change', (values, handle) => {
          goSearch();
      });
  
      
      // ======== Search filters
      
      function goSearch() {
          let winHref = window.location.href.split('?')[0];
          winHref += `?pricerange=${priceSlider.noUiSlider.get()}`;
          winHref += `&mindiscount=${discountSlider.noUiSlider.get()}`;
          window.location.href = winHref;
      }
  
      // ======== Slider reset
      
      const resetButton = document.getElementById('reset');
      resetButton.onclick = (e) => {
          priceSlider.noUiSlider.reset();
          discountSlider.noUiSlider.reset();
      };
  
      // ======== Slider set
      
      const params = new URLSearchParams(window.location.search);
      const minDiscount = params.get("mindiscount");
      const priceRange = params.get("pricerange");
  
      if (minDiscount) {
          discountSlider.noUiSlider.set(parseInt(minDiscount));
      }
      if (priceRange) {
          priceSlider.noUiSlider.set(priceRange.split(','));
      }
      
  });
  